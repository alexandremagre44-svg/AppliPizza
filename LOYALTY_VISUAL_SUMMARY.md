# RÃ©sumÃ© Visuel du SystÃ¨me de FidÃ©litÃ©

## ğŸ“± Interface Utilisateur

### Page Profil - Nouvelle Section FidÃ©litÃ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â­ Programme de FidÃ©litÃ©          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ† Niveau GOLD              â”‚  â”‚
â”‚  â”‚  5000 points Ã  vie           â”‚  â”‚
â”‚  â”‚                         -10% â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Points FidÃ©litÃ©        â­   â”‚  â”‚
â”‚  â”‚  850 pts                     â”‚  â”‚
â”‚  â”‚                              â”‚  â”‚
â”‚  â”‚  Progression vers pizza:    â”‚  â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 85%            â”‚  â”‚
â”‚  â”‚  Plus que 150 points         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  RÃ©compenses disponibles:           â”‚
â”‚  ğŸ• Pizza Gratuite                  â”‚
â”‚  ğŸ¥¤ Boisson Gratuite                â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ° Tourner la Roue (2 dispos)â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Page Checkout - RÃ©ductions VIP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   RÃ©capitulatif                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  2x Pizza Margherita      20.00 â‚¬  â”‚
â”‚  1x Coca-Cola              3.00 â‚¬  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Sous-total               23.00 â‚¬  â”‚
â”‚  RÃ©duction VIP GOLD â­    -2.30 â‚¬  â”‚
â”‚  Frais de service          5.00 â‚¬  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Total                    25.70 â‚¬  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                     â”‚
â”‚  Utiliser des rÃ©compenses           â”‚
â”‚  â˜‘ ğŸ• Pizza Gratuite                â”‚
â”‚  â˜ ğŸ¥¤ Boisson Gratuite              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Flux Utilisateur

### 1. Inscription/Connexion
```
Utilisateur â†’ FirebaseAuthService
                    â†“
            LoyaltyService.initializeLoyalty()
                    â†“
            Profil crÃ©Ã© avec:
            - loyaltyPoints: 0
            - lifetimePoints: 0
            - vipTier: "bronze"
            - rewards: []
            - availableSpins: 0
```

### 2. Passer une Commande
```
Utilisateur passe commande (25.00â‚¬)
                    â†“
        FirebaseOrderService.createOrder()
                    â†“
    LoyaltyService.addPointsFromOrder()
                    â†“
        Calcul: 25.00â‚¬ Ã— 10 = 250 points
                    â†“
        loyaltyPoints: 0 â†’ 250
        lifetimePoints: 0 â†’ 250
                    â†“
        VÃ©rifications:
        - 250 Ã· 1000 = 0 pizza gratuite
        - 250 Ã· 500 = 0 tour de roue
        - vipTier reste "bronze"
```

### 3. Atteindre 1000 Points
```
Utilisateur a 1250 points
                    â†“
    Calcul automatique:
    - 1250 Ã· 1000 = 1 pizza gratuite
    - Reste: 1250 % 1000 = 250 points
                    â†“
    Mise Ã  jour:
    - loyaltyPoints: 250
    - rewards: [{ type: "free_pizza", ... }]
                    â†“
    Affichage dans profil:
    "ğŸ• Pizza Gratuite"
```

### 4. Devenir Silver (2000+ pts lifetime)
```
Utilisateur a 2100 points lifetime
                    â†“
    VipTier.getTierFromLifetimePoints(2100)
                    â†“
    vipTier: "bronze" â†’ "silver"
                    â†“
    Au checkout:
    - RÃ©duction de 5% appliquÃ©e
    - Badge SILVER â­ affichÃ©
```

### 5. Tourner la Roue
```
Utilisateur clique "Tourner la Roue"
                    â†“
    LoyaltyService.spinRewardWheel()
                    â†“
    GÃ©nÃ©ration alÃ©atoire:
    - 5% chance: Rien
    - 20% chance: 50-200 points bonus
    - 30% chance: Boisson gratuite
    - 45% chance: Dessert gratuit
                    â†“
    RÃ©sultat: "Boisson gratuite"
                    â†“
    Mise Ã  jour:
    - availableSpins: 1 â†’ 0
    - rewards: [..., { type: "free_drink" }]
                    â†“
    Popup: "FÃ©licitations ! ğŸ¥¤"
```

## ğŸ“Š Progression des Niveaux

```
Points Lifetime:

    0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 2000 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 5000 â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’
    â”‚              â”‚                â”‚
  BRONZE         SILVER           GOLD
   0% off         5% off          10% off
    ğŸ¥‰             ğŸ¥ˆ              ğŸ†
```

## ğŸ SystÃ¨me de RÃ©compenses

### Attribution Automatique

```
Commandes â†’ Points â†’ Paliers â†’ RÃ©compenses

1. Tous les 1000 points:
   â””â†’ ğŸ• Pizza Gratuite

2. Tous les 500 points lifetime:
   â””â†’ ğŸ° 1 Tour de Roue
        â”œâ†’ 20% : Bonus Points (50-200)
        â”œâ†’ 30% : ğŸ¥¤ Boisson Gratuite
        â”œâ†’ 45% : ğŸ° Dessert Gratuit
        â””â†’  5% : Rien
```

### Utilisation au Checkout

```
1. Client sÃ©lectionne rÃ©compenses
   â˜‘ Pizza Gratuite
   â˜ Boisson Gratuite

2. Confirmation commande
   â†“
   LoyaltyService.useReward()

3. RÃ©compense marquÃ©e:
   used: false â†’ true
   usedAt: Timestamp
```

## ğŸ”„ Cycle de Vie Complet

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. INSCRIPTION                              â”‚
â”‚     loyaltyPoints: 0                         â”‚
â”‚     lifetimePoints: 0                        â”‚
â”‚     vipTier: "bronze"                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. PREMIÃˆRE COMMANDE (50â‚¬)                  â”‚
â”‚     + 500 points                             â”‚
â”‚     loyaltyPoints: 500                       â”‚
â”‚     lifetimePoints: 500                      â”‚
â”‚     availableSpins: +1                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. ACCUMULATION (150â‚¬ dÃ©pensÃ©s)             â”‚
â”‚     + 1500 points                            â”‚
â”‚     loyaltyPoints: 2000 â†’ 1000 (1 pizza)    â”‚
â”‚     lifetimePoints: 2000                     â”‚
â”‚     vipTier: "bronze" â†’ "silver"             â”‚
â”‚     rewards: [free_pizza]                    â”‚
â”‚     availableSpins: 4                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. NIVEAU GOLD (500â‚¬+ dÃ©pensÃ©s)             â”‚
â”‚     lifetimePoints: 5000+                    â”‚
â”‚     vipTier: "gold"                          â”‚
â”‚     RÃ©duction: 10% sur toutes commandes      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¾ Structure Firestore

```javascript
users/{uid} {
  // Champs existants
  email: "client@example.com",
  role: "client",
  displayName: "Jean Dupont",
  createdAt: Timestamp,
  
  // Nouveaux champs fidÃ©litÃ©
  loyaltyPoints: 850,           // Solde actuel
  lifetimePoints: 2350,         // Total cumulÃ©
  vipTier: "silver",            // bronze | silver | gold
  availableSpins: 2,            // Tours de roue dispo
  rewards: [
    {
      type: "free_pizza",
      value: null,
      used: false,
      createdAt: Timestamp,
      usedAt: null
    },
    {
      type: "free_drink",
      value: null,
      used: true,
      createdAt: Timestamp,
      usedAt: Timestamp
    }
  ],
  updatedAt: Timestamp
}
```

## ğŸ¨ Design System

### Couleurs par Niveau VIP

```
Bronze: #8D6E63 (Marron)
Silver: #BDBDBD (Gris argentÃ©)  
Gold:   #F57C00 (Or/Ambre)
```

### IcÃ´nes

```
Points:        â­ stars
Pizza:         ğŸ• local_pizza
Boisson:       ğŸ¥¤ local_drink
Dessert:       ğŸ° cake
Roue:          ğŸ° casino
Bronze:        ğŸ† emoji_events
Silver:        ğŸ¥ˆ military_tech
Gold:          ğŸ‘‘ workspace_premium
Cadeau:        ğŸ card_giftcard
```

## ğŸ“ˆ Exemples de Calcul

### Exemple 1: Nouveau client
```
Commande: 35.00â‚¬
Points gagnÃ©s: 350 pts
Total points: 350 pts
Pizzas gratuites: 0
Tours de roue: 0
Niveau: Bronze (0% off)
```

### Exemple 2: Client rÃ©gulier
```
Lifetime: 1800 pts
Commande: 25.00â‚¬
Points gagnÃ©s: 250 pts
Total points actuel: 300 â†’ 550 pts
Total lifetime: 1800 â†’ 2050 pts
Pizzas gratuites: 0
Tours de roue: +1 (passage de 3 Ã  4 paliers de 500)
Niveau: Bronze â†’ Silver (5% off)
RÃ©duction appliquÃ©e: 25â‚¬ Ã— 5% = 1.25â‚¬ Ã©conomisÃ©s
```

### Exemple 3: VIP Gold
```
Lifetime: 5500 pts
Points actuels: 2300 pts
Commande: 100.00â‚¬
Points gagnÃ©s: 1000 pts
Total points: 2300 â†’ 3300 pts
Pizzas gratuites: +3 (3300 Ã· 1000)
Points restants: 300 pts (3300 % 1000)
Niveau: Gold (10% off)
RÃ©duction: 100â‚¬ Ã— 10% = 10â‚¬ Ã©conomisÃ©s
Prix final: 90â‚¬
Tours de roue: +2 (passage de 11 Ã  13 paliers)
```

Ce systÃ¨me est conÃ§u pour :
âœ… RÃ©compenser la fidÃ©litÃ©
âœ… Encourager les commandes rÃ©guliÃ¨res
âœ… Offrir des avantages progressifs
âœ… Maintenir l'engagement client
âœ… ÃŠtre facile Ã  comprendre et utiliser
